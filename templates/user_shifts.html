<script type="text/javascript">
	function set_to_now(id) {
		document.getElementById(id + '_time').value = moment().format('HH:mm');
		var days = document.getElementById(id + '_day').getElementsByTagName(
				'option');
		for ( var i = 0; i < days.length; i++) {
			if (days[i].value == moment().format('YYYY-MM-DD'))
				days[i].selected = true;
		}
	}

  // handle filter-setting via modal
  function updateFilters(filterName, modalSelectorPrefix) {
    var selectedFilters = $(modalSelectorPrefix + filterName).find('input[type="checkbox"]:checked');

    $('#selection_' + filterName).find('li').hide();
    $('#selection_' + filterName).find('input[type="checkbox"]').prop('checked', false).removeAttr('checked');

    for(var i=0; i<selectedFilters.length; i++) {
      var checkedFilter = selectedFilters[i];
      var filterIdentifier = $(checkedFilter).attr('data-filter-selector-checkbox');

      $('*[data-filter-selector-li=' + filterIdentifier + ']').show();
      $('*[data-filter-selector-checkbox=' + filterIdentifier + ']').prop('checked', true).attr('checked', true);
    }

    $(modalSelectorPrefix + filterName).modal('hide');
  }

</script>
<form class="form-inline" action="" method="get">
  <input type="hidden" name="p" value="user_shifts">
  <div class="row">
    <div class="col-md-6">
      <h1>%title%</h1>
      <div class="form-group">%start_select%</div>
      <div class="form-group">
        <div class="input-group">
          <input class="form-control" type="time" id="start_time" name="start_time" size="5" pattern="^\d{1,2}:\d{2}$" placeholder="HH:MM" maxlength="5" value="%start_time%">
          <div class="input-group-btn">
            <button class="btn btn-default" title="Now" type="button" onclick="set_to_now('start');">
              <span class="glyphicon glyphicon-time"></span>
            </button>
          </div>
        </div>
      </div>
      &#8211;
      <div class="form-group">%end_select%</div>
      <div class="form-group">
        <div class="input-group">
          <input class="form-control" type="time" id="end_time" name="end_time" size="5" pattern="^\d{1,2}:\d{2}$" placeholder="HH:MM" maxlength="5" value="%end_time%">
          <div class="input-group-btn">
            <button class="btn btn-default" title="Now" type="button" onclick="set_to_now('end');">
              <span class="glyphicon glyphicon-time"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-2">%room_select%</div>
    <div class="col-md-2">%type_select%</div>
    <div class="col-md-2">%filled_select%</div>
  </div>
	<div class="row">
		<div class="col-md-6">
  		<div>%task_notice%</div>
  		<div>%new_style_checkbox%</div>
		<input class="btn btn-primary" type="submit" style="margin-bottom: 20px" value="%filter%">
		</div>
	</div>
</form>
%shifts_table% %ical_text%
