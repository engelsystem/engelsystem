<?php

declare(strict_types=1);

// To change or overwrite some settings, create a config.php

return [
    // MySQL-Connection Settings
    'database'                => [
        'driver'   => env('MYSQL_TYPE', 'mysql'), // mysql or mariadb
        'host'     => env('MYSQL_HOST', 'localhost'),
        'database' => env('MYSQL_DATABASE', 'engelsystem'),
        'username' => env('MYSQL_USER', 'root'),
        'password' => env_secret('MYSQL_PASSWORD', ''),
    ],

    // Header links
    // Available link placeholders: %lang%
    // To disable a header_item in config.php, you can set its value to null
    'header_items'            => [
        // Name can be a translation string, permission is an engelsystem privilege
        // 'Name' => 'URL',
        // 'some.key' => ['URL', 'permission'],

        //'Foo' => ['https://foo.bar/batz-%lang%.html', 'logout'], // Permission: for logged-in users
    ],

    // Footer links
    // To disable a footer item in config.php, you can set its value to null
    'footer_items'            => [
        // Name can be a translation string, permission is a engelsystem privilege
        // 'Name' => 'URL',
        // 'some.key' => ['URL', 'permission'],

        // URL to faq page
        'faq.faq' => [env('FAQ_URL', '/faq'), 'faq.view'],

        // Contact email address, linked on every page
        'Contact' => env('CONTACT_EMAIL', 'mailto:ticket@c3heaven.de'),
    ],

    // Other ways to ask the heaven
    // Multiple contact options / links are possible, analogue to footer_items
    'contact_options' => [
        // E-mail address
        'general.email' => env('CONTACT_EMAIL', 'mailto:ticket@c3heaven.de'),
    ],

    // Email config
    'email'                   => [
        // Can be mail, smtp, sendmail, log or an symfony mailer dsn string like smtps://[usr]:[pass]@smtp.foo.bar:465
        'driver' => env('MAIL_DRIVER', 'mail'),
        'from'   => [
            // From address of all emails
            'address' => env('MAIL_FROM_ADDRESS', 'noreply@example.com'),
            'name'    => env('MAIL_FROM_NAME', env('APP_NAME', 'Engelsystem')),
        ],

        'host'       => env('MAIL_HOST', 'localhost'),
        'port'       => env('MAIL_PORT', 587),
        // If tls transport encryption should be enabled
        'tls'        => env('MAIL_TLS'),
        'username'   => env('MAIL_USERNAME'),
        'password'   => env_secret('MAIL_PASSWORD'),
        'sendmail'   => env('MAIL_SENDMAIL', '/usr/sbin/sendmail -bs'),
    ],

    // Setup external authentication providers
    'oauth'                   => [
        // '[name]' => [config]
        /*
        '[name]' => [
            // Name shown to the user (optional)
            'name' => 'Some Provider',
            // Auth client ID
            'client_id' => 'engelsystem',
            // Auth client secret
            'client_secret' => '[generated by provider]',
            // Authentication URL
            'url_auth' => '[generated by provider]',
            // Token URL
            'url_token' => '[generated by provider]',
            // User info URL which provides userdata
            'url_info' => '[generated by provider]',
            // OAuth Scopes
            // 'scope' => ['openid'],
            // Info unique user id field
            'id' => 'uuid',
            // The following fields are used for registration
            // Info username field (optional)
            'username' => 'nickname',
            // Info email field (optional)
            'email' => 'email',
            // Info first name field (optional)
            'first_name' => 'first-name',
            // Info last name field (optional)
            'last_name' => 'last-name',
            // User URL to provider, linked on provider settings page (optional)
            'url' => '[provider page]',
            // Whether info attributes are nested arrays (optional)
            // For example {"user":{"name":"foo"}} can be accessed using user.name
            'nested_info' => false,
            // Only show after clicking the page title (optional)
            'hidden' => false,
            // Mark user as arrived when using this provider (optional)
            'mark_arrived' => false,
            // If the password field should be enabled on registration (optional)
            'enable_password' => false,
            // Allow registration even if disabled in config (optional)
            'allow_registration' => null,
            // Allow disconnecting user accounts from the oauth provider (optional)
            'allow_user_disconnect' => true,
            // Auto join teams
            // Info groups field (optional)
            'groups' => 'groups',
            // Groups to team (angel type) mapping (optional)
            'teams' => [
                '/Lorem' => 4, // 4 being the ID of the team (angel type)
                '/Foo Mod' => ['id' => 5, 'supporter' => true], // 5 being the ID of the team (angel type)
            ],
        ],
        */
    ],

    // Random, long (at least 32 characters) alphanumeric or base64 encoded key, used for signing
    'app_key' => env_secret('APP_KEY'),

    // see https://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms-40
    'jwt_algorithm' => env('JWT_ALGORITHM', 'HS256'),

    // Number of minutes after a JWT must expire for example max angel type join time
    'jwt_expiration_time' => env('JWT_EXPIRATION_TIME', 60 * 24 * 7),

    // Default theme, 1 = theme1.scss etc.
    'theme'                   => env('THEME', 1),

    // Supported themes
    // To disable a theme in config.php, you can set its value to null
    'themes' => [
        20 => [
            'name' => 'Engelsystem eh22-light (2025)',
            'type' => 'light',
            'navbar_classes' => 'navbar-light',
        ],
        19 => [
            'name' => 'Engelsystem eh22-dark (2025)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark',
        ],
        18 => [
            'name' => 'Engelsystem 38c3 (2024) - Lila, Lachs und Kurven',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark',
        ],
        17 => [
            'name' => 'Engelsystem 37c3 (2023)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark',
        ],
        16 => [
            'name' => 'Engelsystem cccamp23 (2023)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark',
        ],
        15 => [
            'name' => 'Engelsystem rC3 (2021)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark',
        ],
        14 => [
            'name' => 'Engelsystem rC3 teal (2020)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
        13 => [
            'name' => 'Engelsystem rC3 violet (2020)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
        12 => [
            'name' => 'Engelsystem 36c3 (2019)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
        10 => [
            'name' => 'Engelsystem cccamp19 green (2019)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
        9 => [
            'name' => 'Engelsystem cccamp19 yellow (2019)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
        8 => [
            'name' => 'Engelsystem cccamp19 blue (2019)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
        7 => [
            'name' => 'Engelsystem 35c3 dark (2018)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-primary navbar-dark bg-black border-primary',
        ],
        6 => [
            'name' => 'Engelsystem 34c3 dark (2017)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
        5 => [
            'name' => 'Engelsystem 34c3 light (2017)',
            'type' => 'light',
            'navbar_classes' => 'navbar-light bg-light',
        ],
        4 => [
            'name' => 'Engelsystem 33c3 (2016)',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-body border-dark',
        ],
        3 => [
            'name' => 'Engelsystem 32c3 (2015)',
            'type' => 'light',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
        2 => [
            'name' => 'Engelsystem cccamp15',
            'type' => 'light',
            'navbar_classes' => 'navbar-light bg-light',
        ],
        11 => [
            'name' => 'Engelsystem high contrast',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
        0 => [
            'name' => 'Engelsystem light',
            'type' => 'light',
            'navbar_classes' => 'navbar-light bg-light',
        ],
        1 => [
            'name' => 'Engelsystem dark',
            'type' => 'dark',
            'navbar_classes' => 'navbar-dark bg-black border-dark',
        ],
    ],

    // Number of users shown on one admin page table
    'display_users'           => env('DISPLAY_USERS', 100),

    // Required user fields
    'required_user_fields' => [
        'pronoun'            => (bool) env('PRONOUN_REQUIRED', false),
        'firstname'          => (bool) env('FIRSTNAME_REQUIRED', false),
        'lastname'           => (bool) env('LASTNAME_REQUIRED', false),
        'tshirt_size'        => (bool) env('TSHIRT_SIZE_REQUIRED', true),
        'mobile'             => (bool) env('MOBILE_REQUIRED', false),
        'dect'               => (bool) env('DECT_REQUIRED', false),
    ],

    // Allow joining angel type via generated QR code
    'join_qr_code'            => (bool) env('JOIN_QR_CODE', true),

    // Multiply 'night shifts' between start and end (numbers as hours) by multiplier in goodie score
    // Goodies must be enabled to use this feature
    'night_shifts'            => [
        'enabled'    => (bool) env('NIGHT_SHIFTS', true), // Disable to weigh every shift the same
        'start'      => env('NIGHT_SHIFTS_START', 2), // Starting from hour
        'end'        => env('NIGHT_SHIFTS_END', 8), // Ends at (without including) hour
        'multiplier' => env('NIGHT_SHIFTS_MULTIPLIER', 2),
    ],

    // Voucher calculation
    'voucher_settings'        => [
        'initial_vouchers'   => env('INITIAL_VOUCHERS', 0),
        'shifts_per_voucher' => env('SHIFTS_PER_VOUCHER', 0),
        'hours_per_voucher'  => env('HOURS_PER_VOUCHER', 2),
        // 'Y-m-d' formatted
        'voucher_start'      => env('VOUCHER_START') ?: null,
    ],

    // Available T-shirt sizes
    // To disable a t-shirt size in config.php, you can set its value to null
    'tshirt_sizes'            => [
        'S'    => 'Small Straight-Cut',
        'S-F'  => 'Small Fitted-Cut',
        'M'    => 'Medium Straight-Cut',
        'M-F'  => 'Medium Fitted-Cut',
        'L'    => 'Large Straight-Cut',
        'L-F'  => 'Large Fitted-Cut',
        'XL'   => 'XLarge Straight-Cut',
        'XL-F' => 'XLarge Fitted-Cut',
        '2XL'  => '2XLarge Straight-Cut',
        '3XL'  => '3XLarge Straight-Cut',
        '4XL'  => '4XLarge Straight-Cut',
    ],

    'metrics'                 => [
        // User work buckets in seconds
        'work'    => [1 * 60 * 60, 1.5 * 60 * 60, 2 * 60 * 60, 3 * 60 * 60, 5 * 60 * 60, 10 * 60 * 60, 20 * 60 * 60],
        'voucher' => [0, 1, 2, 3, 5, 10, 15, 20],
    ],

    // Session config
    'session'                 => [
        // Supported: pdo or native
        'driver' => env('SESSION_DRIVER', 'pdo'),

        // Cookie name
        'name'   => env('SESSION_NAME', 'session'),

        // Lifetime in days
        'lifetime' => env('SESSION_LIFETIME', 30),
    ],

    // Predefined headers
    // To disable a header in config.php, you can set its value to null
    'headers'                 => [
        'X-Content-Type-Options'  => 'nosniff',
        'X-Frame-Options'         => 'sameorigin',
        'Referrer-Policy'         => 'strict-origin-when-cross-origin',
        'Content-Security-Policy' =>
            'default-src \'self\'; '
            . ' style-src \'self\' \'unsafe-inline\'; '
            . 'img-src \'self\' data:;',
        'X-XSS-Protection'        => '1; mode=block',
        'Feature-Policy'          => 'autoplay \'none\'',
        //'Strict-Transport-Security' => 'max-age=7776000',
        //'Expect-CT' => 'max-age=7776000,enforce,report-uri="[uri]"',
    ],

    // A list of credits
    'credits'                 => [
        'Contribution' => 'Please visit [engelsystem/engelsystem](https://github.com/engelsystem/engelsystem) if '
            . 'you want to contribute, have found any [bugs](https://github.com/engelsystem/engelsystem/issues) '
            . 'or need help.',
    ],

    // var dump server
    'var_dump_server'         => [
        'host' => '127.0.0.1',
        'port' => '9912',
        'enable' => false,
    ],
];
