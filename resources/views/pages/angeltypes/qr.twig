{% extends "layouts/app.twig" %}
{% import 'macros/base.twig' as m %}
{% import 'macros/form.twig' as f %}

{% block title %}{{ __('angeltypes.qr', [angel_type.name]) }}{% endblock %}

{% block content %}
    <div class="container">

        <h1>
            {{ m.back(url('/angeltypes', {'action': 'view', 'angeltype_id': angel_type.id})) }}
            {{ block('title') }}
        </h1>

        {% if qr_data %}
            <div class="offset-md-4 col-md-4">
                <div class="mb-3">
                    {{ qr(qr_data, 400) }}
                </div>

                {{ f.input('url', __('general.url'), {'value': qr_data, 'readonly': true}) }}
            </div>
        {% endif %}

        <div class="offset-md-4 col-md-4">
            <form method="post" class="row row-cols-lg-auto g-3 align-items-center">
                {{ csrf() }}

                <div class="col-12">
                    {{ f.input('minutes', __('angeltypes.qr.time'), {
                        'type': 'number',
                        'required': true,
                        'value': f.formData('minutes', 1),
                        'min': 1,
                        'max': config('jwt_expiration_time'),
                        'info': __('angeltypes.qr.time.info'),
                    }) }}
                </div>

                <div class="col-12">
                    {{ f.submit(__('form.generate'), {'icon_left': 'qr-code'}) }}
                </div>

            </form>
        </div>

    </div>
{% endblock %}
